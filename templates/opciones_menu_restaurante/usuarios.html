{% with uid_prefix=uid|default:"us" %}

{% if user.role == 'admin'%}
<button class="list-group-item list-group-item-action d-flex align-items-center justify-content-between"
        type="button"
        data-bs-target="#{{ uid_prefix }}-permisos">
  <span><i class="bi bi-list-ul me-1 fs-6"></i>Permisos</span>
</button>
{% endif %}

{% if user.role == 'admin'%}
<button class="list-group-item list-group-item-action d-flex align-items-center justify-content-between"
        type="button"
        data-bs-target="#{{ uid_prefix }}-grupos">
  <span><i class="bi bi-person me-1 fs-6"></i> Grupos</span>
</button>
{% endif %}

{% if user.role == 'admin' %}
<button class="list-group-item list-group-item-action d-flex align-items-center justify-content-between"
        type="button"
        data-bs-target="#{{ uid_prefix }}-usuarios">
  <span><i class="bi bi-person me-1 fs-6"></i> usuarios</span>
</button>
{% endif %}

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const prefix = "{{ uid_prefix|default:'us' }}";

    const goto = new Map([
      [`#${prefix}-permisos`, "{% url 'permisos_list' %}"],
      [`#${prefix}-grupos`, "{% url 'permisos_goup_list' %}"],
      [`#${prefix}-usuarios`, "{% url 'usuarios_list' %}"],
    ]);

    document
      .querySelectorAll(`[data-bs-target^="#${prefix}-"]`)
      .forEach(btn => {
        btn.addEventListener('click', (ev) => {
          ev.preventDefault();
          const target = btn.getAttribute('data-bs-target');
          const href = goto.get(target);
          if (href) window.location.href = href;
        });
      });
  });
</script>

{% endwith %}