<form id="form_documentos_a_consolidar">
    <div class="table-responsive">
        <table class="table table-striped table-hover align-middle">
            <thead>
                <tr>
                    <th scope="col">
                        <input type="checkbox" id="select_all_docs" class="form-check-input">
                    </th>
                    <th scope="col">DTE</th>
                    <th scope="col">Receptor</th>
                    <th scope="col">Monto</th>
                    <th scope="col">Fecha</th>
                    <th scope="col">Estado</th>
                </tr>
            </thead>
            <tbody>
                {% for detalle in doc.detalles.all %} 
                <tr class="list-group-item d-flex justify-content-between align-items-center py-1">
                    <td>
                        <strong>{{ detalle.producto.descripcion }}</strong> 
                        <small class="text-muted">({{ detalle.cantidad|floatformat:0 }} x ${{ detalle.precio_unitario|floatformat:2 }})</small>
                    </div>
                    {% comment %} <span class="badge bg-primary rounded-pill">Total LÃ­nea: $N/A</span>  {% endcomment %}
                </li>
            {% endfor %}
                {% for doc in documentos_pendientes %}
                <tr data-documento-id="{{ doc.id }}">
                    <td>
                        <input type="checkbox"
                               name="documentos_seleccionados"
                               value="{{ doc.id }}"
                               data-documento-detalles={{doc.detalles.all}}
                               class="form-check-input select-doc">
                    </td>
                    <td>{{ doc.numero_control }}</td>
                    <td>{{ doc.dtereceptor }}</td>
                    <td>${{ doc.total_pagar|floatformat:2 }}</td>
                    <td>{{ doc.fecha_emision|date:"Y-m-d" }}</td>
                    <td><span class="badge bg-warning">{{ doc.estado }}</span></td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" class="text-center text-muted">
                        No se encontraron documentos pendientes para el filtro seleccionado.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</form>

<div class="modal-footer">
    <button type="button" class="btn btn-secondary" id="btn-cancel" data-bs-dismiss="modal">Cerrar</button>
    <button type="button" class="btn btn-success" id="btn_consolidar_datos" disabled>
        <i class="bi bi-file-earmark-diff me-2"></i> Consolidar Datos (Probar)
    </button>
</div>
