{% extends "base.html" %}
{% block content %}
<div class="container min-vh-100 d-flex flex-column align-items-center justify-content-center">
    <div class="card shadow-lg border-0 rounded-4" style="max-width: 350px; width: 100%;">
        <div class="card-body p-4 text-center">
            <h1 class="h4 mb-3">Acceso Staff</h1>
            
            <form method="post" id="pinForm">
                {% csrf_token %}
                <input type="password" name="username" id="pinDisplay" 
                       class="form-control form-control-lg text-center mb-4" 
                       placeholder="****" readonly style="font-size: 2rem; letter-spacing: 10px;">
                
                       <div class="row g-2 mb-3">
                        <div class="col-4"><button type="button" class="btn btn-outline-dark w-100 py-3 num-btn" value="7">7</button></div>
                        <div class="col-4"><button type="button" class="btn btn-outline-dark w-100 py-3 num-btn" value="8">8</button></div>
                        <div class="col-4"><button type="button" class="btn btn-outline-dark w-100 py-3 num-btn" value="9">9</button></div>
                        <div class="col-4"><button type="button" class="btn btn-outline-dark w-100 py-3 num-btn" value="4">4</button></div>
                        <div class="col-4"><button type="button" class="btn btn-outline-dark w-100 py-3 num-btn" value="5">5</button></div>
                        <div class="col-4"><button type="button" class="btn btn-outline-dark w-100 py-3 num-btn" value="6">6</button></div>
                        <div class="col-4"><button type="button" class="btn btn-outline-dark w-100 py-3 num-btn" value="1">1</button></div>
                        <div class="col-4"><button type="button" class="btn btn-outline-dark w-100 py-3 num-btn" value="2">2</button></div>
                        <div class="col-4"><button type="button" class="btn btn-outline-dark w-100 py-3 num-btn" value="3">3</button></div>
                        <div class="col-4"><button type="button" class="btn btn-danger w-100 py-3" id="clearBtn">C</button></div>
                        <div class="col-4"><button type="button" class="btn btn-outline-dark w-100 py-3 num-btn" value="0">0</button></div>
                        <div class="col-4"><button type="submit" class="btn btn-success w-100 py-3">OK</button></div>
                    </div>
            </form>
            <a href="{% url 'login' %}" class="text-muted small">Volver al login administrador</a>
        </div>
    </div>

    {% if messages %}
        <div class="container mt-3">
            {% for message in messages %}
              {% if "usuario_no_encontrado" in message.tags%}
                <div class="alert alert-danger alert-dismissible fade show w-auto" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
                {% endif %}
            {% endfor %}    
        </div>
    {% endif %}
</div>

<script>
    const display = document.getElementById('pinDisplay');
    document.querySelectorAll('.num-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            if (display.value.length < 6) display.value += btn.value;
        });
    });
    document.getElementById('clearBtn').addEventListener('click', () => {
        display.value = '';
    });
</script>
{% endblock %}